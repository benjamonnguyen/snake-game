(()=>{"use strict";var t,o,e,r,i,s,h={949:(t,o,e)=>{e.d(o,{Z:()=>d});var r=e(986);class i{constructor(t,o){this.coord=t,this.next=o}}const s=20,h=100,n=5;class a{constructor(t,o){this.x=t,this.y=o}drawRect(t,o){o.roundRect(s*this.x,s*this.y,s,s,t).fill()}clearRect(t){t.clearRect(s*this.x,s*this.y,s,s)}}class c{constructor(){[this.head,this.tail,this.segmentCount]=this.#t(),this.bodyMap=new Map}#t(){let t=6,o=null,e=new i(new a(t,5),o),r=1;const s=e;for(;r<5;)o=e,e=new i(new a(--t,5),o),r++;return[s,e,r]}#o(t){this.bodyMap.has(t.x)?this.bodyMap.get(t.x).add(t.y):this.bodyMap.set(t.x,new Set([t.y]))}#e(t){const o=this.bodyMap.get(t.x);null!=o&&o.delete(t.y)}bodyMapHas(t){const o=this.bodyMap.get(t.x);return null!=o&&o.has(t.y)}render(t){let o=this.tail;for(;null!=o;)o.coord.drawRect(n,t),null!=o.next&&this.#o(o.coord),o=o.next}move(t,o){let e;switch(t){case r.o.ArrowDown:e=new a(this.head.coord.x,this.head.coord.y+1);break;case r.o.ArrowUp:e=new a(this.head.coord.x,this.head.coord.y-1);break;case r.o.ArrowRight:e=new a(this.head.coord.x+1,this.head.coord.y);break;case r.o.ArrowLeft:e=new a(this.head.coord.x-1,this.head.coord.y)}this.tail.coord.clearRect(o),this.#e(this.tail.coord),this.head.next=new i(e,null),this.#o(this.head.coord),this.head=this.head.next,this.tail=this.tail.next,this.head.coord.drawRect(n,o)}grow(){this.tail=new i(this.tail.coord,this.tail),this.#o(this.tail.coord)}}class d{constructor(t,o,e,i){this.ctx=t,this.scoreDisplay=o,this.width=e,this.height=i,this.direction=r.o.ArrowRight,this.nextDirection=this.direction,this.snake=new c,this.foodCoord=this.#r(),this.score=0}async start(){this.snake.render(this.ctx),this.#i()}#i(){this.snake.move(this.nextDirection,this.ctx),this.direction=this.nextDirection,this.#s(),this.#h(this.snake.head.coord)||this.snake.bodyMapHas(this.snake.head.coord)?this.#n():setTimeout((()=>this.#i()),h)}#s(){this.snake.head.coord.x===this.foodCoord.x&&this.snake.head.coord.y===this.foodCoord.y&&(this.score+=10,this.scoreDisplay.innerText="SCORE: "+this.score,this.snake.grow(),this.foodCoord=this.#r())}#h(t){return t.x<0||t.x>this.width/s-1||t.y<0||t.y>this.height/s-1}#n(){}#r(){let t;for(;!t||this.snake.bodyMapHas(t);)t=new a(this.#a(this.width/s),this.#a(this.height/s));return t.drawRect(20,this.ctx),t}#a(t){return Math.floor(Math.random()*t)}}},986:(t,o,e)=>{e.d(o,{M:()=>i,o:()=>r});const r={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"};function i(t){return r[t]}},138:(t,o,e)=>{e.a(t,(async(t,o)=>{try{var r=e(949),i=e(986);CanvasRenderingContext2D.prototype.roundRect=function(t,o,e,r,i){return e<2*i&&(i=e/2),r<2*i&&(i=r/2),this.beginPath(),this.moveTo(t+i,o),this.arcTo(t+e,o,t+e,o+r,i),this.arcTo(t+e,o+r,t,o+r,i),this.arcTo(t,o+r,t,o,i),this.arcTo(t,o,t+e,o,i),this.closePath(),this};const t=document.getElementById("snakeLayer"),s=t.getContext("2d"),h=document.getElementById("score");h.innerText="SCORE: 0";const n=new r.Z(s,h,parseInt(t.width),parseInt(t.height));document.onkeydown=t=>{const o=(0,i.M)(t.code);(n.direction!==i.o.ArrowDown&&n.direction!==i.o.ArrowUp||o!==i.o.ArrowDown&&o!==i.o.ArrowUp)&&(n.direction!==i.o.ArrowLeft&&n.direction!==i.o.ArrowRight||o!==i.o.ArrowLeft&&o!==i.o.ArrowRight)&&(n.nextDirection=o)},await n.start(),o()}catch(t){o(t)}}),1)}},n={};function a(t){var o=n[t];if(void 0!==o)return o.exports;var e=n[t]={exports:{}};return h[t](e,e.exports,a),e.exports}t="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",o="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",e="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=t=>{t&&(t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},i=t=>!--t.r&&t(),s=(t,o)=>t?t.push(o):i(o),a.a=(h,n,a)=>{var c,d,l,w=a&&[],y=h.exports,p=!0,u=!1,x=(o,e,r)=>{u||(u=!0,e.r+=o.length,o.map(((o,i)=>o[t](e,r))),u=!1)},f=new Promise(((t,o)=>{l=o,d=()=>(t(y),r(w),w=0)}));f[o]=y,f[t]=(t,o)=>{if(p)return i(t);c&&x(c,t,o),s(w,t),f.catch(o)},h.exports=f,n((h=>{var n;c=(h=>h.map((h=>{if(null!==h&&"object"==typeof h){if(h[t])return h;if(h.then){var n=[];h.then((t=>{a[o]=t,r(n),n=0}),(t=>{a[e]=t,r(n),n=0}));var a={};return a[t]=(t,o)=>(s(n,t),h.catch(o)),a}}var c={};return c[t]=t=>i(t),c[o]=h,c})))(h);var a=()=>c.map((t=>{if(t[e])throw t[e];return t[o]})),d=new Promise(((t,o)=>{(n=()=>t(a)).r=0,x(c,n,o)}));return n.r?d:a()}),(t=>(t&&l(f[e]=t),d()))),p=!1},a.d=(t,o)=>{for(var e in o)a.o(o,e)&&!a.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:o[e]})},a.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o),a(138)})();