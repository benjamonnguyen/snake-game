(()=>{"use strict";var t,e,o,i,r,n,s={941:(t,e,o)=>{o.d(e,{Z:()=>w});var i=o(986);class r{constructor(t,e){this.coord=t,this.next=e}}const n=20,s=100,h=20,a=1e3,c=5;class d{constructor(t,e){this.x=t,this.y=e}drawRect(t,e,o){o.fillStyle=t,o.roundRect(n*this.x,n*this.y,n,n,e).fill()}clearRect(t){t.clearRect(n*this.x,n*this.y,n,n)}toString(){return this.x+","+this.y}}class l{constructor(){this.body=new Set,this.color="#101f15"}initialize(t){let e=6,o=null,i=new r(new d(e,5),o),n=1;for(this.head=i;n<5;)o=i,i=new r(new d(--e,5),o),n++;this.tail=i,this.segmentCount=n,this.render(t)}render(t){let e=this.tail;for(;null!=e;)e.coord.drawRect(this.color,c,t),null!=e.next&&this.body.add(e.coord.toString()),e=e.next}move(t,e){let o;switch(t){case i.o.ArrowDown:case i.o.KeyS:o=new d(this.head.coord.x,this.head.coord.y+1);break;case i.o.ArrowUp:case i.o.KeyW:o=new d(this.head.coord.x,this.head.coord.y-1);break;case i.o.ArrowRight:case i.o.KeyD:o=new d(this.head.coord.x+1,this.head.coord.y);break;case i.o.ArrowLeft:case i.o.KeyA:o=new d(this.head.coord.x-1,this.head.coord.y)}this.tail.coord.clearRect(e),this.body.delete(this.tail.coord.toString()),this.head.next=new r(o,null),this.body.add(this.head.coord.toString()),this.head=this.head.next,this.tail=this.tail.next,this.head.coord.drawRect(this.color,c,e)}grow(){this.tail=new r(this.tail.coord,this.tail),this.body.add(this.tail.coord.toString())}}class y extends l{constructor(){super(),this.color="#f4deb3"}initialize(t){let e=28,o=new r(new d(e,17),null),i=1;for(this.tail=o;i<5;)o.next=new r(new d(--e,17),null),o=o.next,i++;this.head=o,this.segmentCount=i,this.render(t)}}class w{constructor(t,e,o,i,r){this.ctx=t,this.winner=e,this.playAgainBtn=o,this.width=i,this.height=r}async start(){this.ctx.clearRect(0,0,this.width,this.height),this.tickRate=s*a,this.direction=i.o.ArrowRight,this.nextDirection=this.direction,this.direction2=i.o.KeyA,this.nextDirection2=this.direction2,this.snake=new l,this.snake2=new y,this.foodCoord=this.#t(),this.snake.initialize(this.ctx),this.snake2.initialize(this.ctx),this.#e()}#e(){this.snake.move(this.nextDirection,this.ctx),this.direction=this.nextDirection,this.snake2.move(this.nextDirection2,this.ctx),this.direction2=this.nextDirection2;const t=this.#o();null!=t?this.#i(t):(this.#r(),setTimeout((()=>this.#e()),Math.max(this.tickRate--/a,h)))}#o(){let t=null;return(this.snake.body.has(this.snake.head.coord.toString())||this.snake2.body.has(this.snake.head.coord.toString())||this.#n(this.snake.head.coord))&&(t=null==t?"snake":"both"),(this.snake.body.has(this.snake2.head.coord.toString())||this.snake2.body.has(this.snake2.head.coord.toString())||this.#n(this.snake2.head.coord))&&(t=null==t?"snake2":"both"),t}#r(){this.snake.head.coord.x===this.foodCoord.x&&this.snake.head.coord.y===this.foodCoord.y?(this.snake.grow(),this.foodCoord=this.#t()):this.snake2.head.coord.x===this.foodCoord.x&&this.snake2.head.coord.y===this.foodCoord.y&&(this.snake2.grow(),this.foodCoord=this.#t())}#n(t){return t.x<0||t.x>this.width/n-1||t.y<0||t.y>this.height/n-1}#i(t){let e="Draw";switch(t){case"snake":e="White Snake wins!";break;case"snake2":e="Black Snake wins!"}this.winner.innerText=e,this.winner.style.display="inline",this.playAgainBtn.style.display="inline"}#t(){let t;for(;!t||this.snake.body.has(t.toString())||this.snake2.body.has(t.toString());)t=new d(this.#s(this.width/n),this.#s(this.height/n));return t.drawRect("#d83a20",20,this.ctx),t}#s(t){return Math.floor(Math.random()*t)}}},986:(t,e,o)=>{o.d(e,{M:()=>r,o:()=>i});const i={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",KeyW:"w",KeyS:"s",KeyA:"a",KeyD:"d"};function r(t){return i[t]}},138:(t,e,o)=>{o.a(t,(async(t,e)=>{try{var i=o(941),r=o(986);CanvasRenderingContext2D.prototype.roundRect=function(t,e,o,i,r){return o<2*r&&(r=o/2),i<2*r&&(r=i/2),this.beginPath(),this.moveTo(t+r,e),this.arcTo(t+o,e,t+o,e+i,r),this.arcTo(t+o,e+i,t,e+i,r),this.arcTo(t,e+i,t,e,r),this.arcTo(t,e,t+o,e,r),this.closePath(),this};const n=document.getElementById("snakeLayer"),s=n.getContext("2d"),h=document.getElementById("winner"),a=document.getElementById("playAgainBtn");a.addEventListener("click",d);const c=new i.Z(s,h,a,parseInt(n.width),parseInt(n.height));async function d(){h.innerText="snek",a.style.display="none",await c.start()}document.onkeydown=t=>{const e=(0,r.M)(t.code);e===r.o.ArrowDown||e===r.o.ArrowUp?c.direction!==r.o.ArrowLeft&&c.direction!==r.o.ArrowRight||(c.nextDirection=e):e===r.o.ArrowLeft||e===r.o.ArrowRight?c.direction!==r.o.ArrowUp&&c.direction!==r.o.ArrowDown||(c.nextDirection=e):e===r.o.KeyW||e===r.o.KeyS?c.direction2!==r.o.KeyA&&c.direction2!==r.o.KeyD||(c.nextDirection2=e):e!==r.o.KeyA&&e!==r.o.KeyD||c.direction2!==r.o.KeyS&&c.direction2!==r.o.KeyW||(c.nextDirection2=e)},await c.start(),e()}catch(l){e(l)}}),1)}},h={};function a(t){var e=h[t];if(void 0!==e)return e.exports;var o=h[t]={exports:{}};return s[t](o,o.exports,a),o.exports}t="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",i=t=>{t&&(t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},r=t=>!--t.r&&t(),n=(t,e)=>t?t.push(e):r(e),a.a=(s,h,a)=>{var c,d,l,y=a&&[],w=s.exports,k=!0,u=!1,x=(e,o,i)=>{u||(u=!0,o.r+=e.length,e.map(((e,r)=>e[t](o,i))),u=!1)},g=new Promise(((t,e)=>{l=e,d=()=>(t(w),i(y),y=0)}));g[e]=w,g[t]=(t,e)=>{if(k)return r(t);c&&x(c,t,e),n(y,t),g.catch(e)},s.exports=g,h((s=>{var h;c=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[t])return s;if(s.then){var h=[];s.then((t=>{a[e]=t,i(h),h=0}),(t=>{a[o]=t,i(h),h=0}));var a={};return a[t]=(t,e)=>(n(h,t),s.catch(e)),a}}var c={};return c[t]=t=>r(t),c[e]=s,c})))(s);var a=()=>c.map((t=>{if(t[o])throw t[o];return t[e]})),d=new Promise(((t,e)=>{(h=()=>t(a)).r=0,x(c,h,e)}));return h.r?d:a()}),(t=>(t&&l(g[o]=t),d()))),k=!1},a.d=(t,e)=>{for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a(138)})();